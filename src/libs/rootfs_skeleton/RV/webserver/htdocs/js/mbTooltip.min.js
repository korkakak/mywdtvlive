jQuery.fn.mbTooltip=function(A){return this.each(function(){this.options={opacity:0.9,wait:2000,timePerWord:70,cssClass:"default",hasArrow:true,imgPath:"images/",hasShadow:true,shadowColor:"black",shadowLeft:1,ancor:"mouse",shadowTop:1,fade:200};$.extend(this.options,A);var F=$(this).is("[title]")?$(this):$(this).find("[title]");var D=this.options.wait;var C=this.options.hasShadow;var E=this.options.fade;var B=this.options;$(F).each(function(){$(this).attr("tooltip",$(this).attr("title"));$(this).removeAttr("title");$(this).attr("tooltipEnable","true");var I=$(this);var H=I.attr("tooltip");var G=$.browser.msie?"mouseenter":"mouseover";$(this).bind(G,function(J){if(B.ancor=="mouse"){$().getXY()}$(this).one("mouseout",function(){$(this).stopTime();$(this).deleteTooltip(C,E)}).one("click",function(){});$(this).oneTime(D,function(){if($(this).attr("tooltipEnable")=="true"){$(this).buildTooltip(H,B,J)}})})})})};var X=0;var Y=0;$.fn.extend({getXY:function(){$().bind("mousemove",function(A){X=A.pageX;Y=A.pageY})},buildTooltip:function(A,B){this.options={};$.extend(this.options,B);var D=$(this);$("body").append("<div id='tooltip'></div>");var G=this.options.imgPath+"up.png";$("#tooltip").html(A);$("#tooltip").addClass(this.options.cssClass);if(this.options.hasArrow){$("#tooltip").prepend("<img id='ttimg' src='"+G+"'>");$("#ttimg").css({position:"absolute",opacity:0.5});$("#ttimg").addClass("top")}$("#tooltip").css({position:"absolute",top:this.options.ancor=="mouse"?Y+7:D.offset().top+(D.outerHeight()),left:this.options.ancor=="mouse"?X+7:D.offset().left,opacity:0});$("#tooltip").findBestPos(D,this.options.imgPath,this.options.ancor);if(this.options.ancor=="mouse"){$().unbind("mousemove")}if(this.options.hasShadow){$("#tooltip").dropShadow({left:this.options.shadowLeft,top:this.options.shadowTop,blur:2,opacity:0.3,color:this.options.shadowColor});$(".dropShadow").css("display","none");$(".dropShadow").fadeIn(this.options.fade)}$("#tooltip").fadeTo(this.options.fade,this.options.opacity,function(){});var E=3000+A.length*this.options.timePerWord;var C=this.options.hasShadow;var F=this.options.fade;$(this).oneTime(E,function(){$(this).deleteTooltip(C,F)})},deleteTooltip:function(A,C){var B=A?"#tooltip,.dropShadow":"#tooltip";$(B).fadeOut(C,function(){$(B).remove()})},findBestPos:function(G,E,F){var A=$(this);var D=$(window).width()+$(window).scrollLeft();var B=$(window).height()+$(window).scrollTop();var H=A.outerWidth();A.css({width:H});var I=((A.offset().top+A.outerHeight(true))>B)?A.offset().top-(F!="mouse"?G.outerHeight():0)-A.outerHeight()-20:A.offset().top;I=I<0?0:I;var C=((A.offset().left+H)>D-5)?A.offset().left-(H-(F!="mouse"?G.outerWidth():0)):A.offset().left;C=C<0?0:C;if(A.offset().top+A.outerHeight(true)>B){$("#ttimg").attr("src",E+"bottom.png");$("#ttimg").removeClass("top").addClass("bottom")}A.css({width:H,top:I,left:C})},disableTooltip:function(){$(this).find("[tooltip]").attr("tooltipEnable","false")},enableTooltip:function(){$(this).find("[tooltip]").attr("tooltipEnable","true")}});
